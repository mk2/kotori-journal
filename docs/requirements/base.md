# kotori-journal 要件定義書

## 概要
日々のジャーナルを記録し、AIと対話しながら整理・保存できるCLIアプリケーション

## 主要機能

### 1. ジャーナル記録機能
- **記録頻度**: 毎日、任意のタイミングで複数回入力可能
- **入力形式**: 短文での都度入力（Cmd+Enterで送信）
- **カテゴリ**: ユーザーが自由に追加可能（デフォルト：仕事、プライベート）
- **一時保存**: 入力内容は一時ファイルに保存（アプリの異常終了対策）

### 2. AI機能（Claude API使用）
- **質問機能**: ジャーナル内容に関する質問への回答
- **要約機能**: 入力内容の要約生成
- **アドバイス機能**: 内容に基づくアドバイス提供
- **トリガー**: ユーザーが指定する特定文字列で起動
- **APIキー管理**: 環境変数または.envファイルで管理

### 3. 日報生成機能
- **生成タイミング**: 翌日の初回起動時に前日分を自動生成
- **フォーマット**: 時系列表示
- **保存形式**: Markdown形式
- **保存先**: 年/月/日.md のディレクトリ構造

### 4. 検索機能
- **基本検索**: 日付、キーワード検索
- **将来拡張**: 曖昧検索（後日実装）

### 5. UI/UX
- **実装方法**: Ink（React for CLI）を使用したリッチなCLI
- **起動コマンド**: `kotori`
- **初期画面**: ジャーナル入力画面
- **過去記録表示**: 閲覧中であることを明確に表示

## 技術仕様
- **プラットフォーム**: ターミナル（CLI）
- **UIフレームワーク**: Ink（https://github.com/vadimdemedes/ink）
- **データ保存**: ローカルファイルシステム（Markdown形式）
- **AI**: Anthropic Claude API
- **実行環境**: Node.js

## データ構造
```
kotori-journal-data/
├── 2025/
│   ├── 01/
│   │   ├── 01.md
│   │   ├── 02.md
│   │   └── ...
│   └── ...
├── categories.json      # カテゴリ設定
├── settings.json       # アプリ設定（AIトリガー文字列など）
└── .temp/             # 一時ファイル保存用
```

## 初期バージョンの実装優先順位
1. 基本的なジャーナル入力・保存機能
2. カテゴリ機能
3. 日報自動生成機能
4. 基本的な検索機能（日付・キーワード）
5. シンプルなAI機能（最小限の実装）

## 制約事項
- シングルユーザー、ローカル環境での使用を前提
- 複数デバイス間の同期は非対応
- 会話履歴の保存は行わない（日報のみ保存）