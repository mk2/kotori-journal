<div align="center">
  <img src="docs/images/kotori_original.png" alt="Kotori Journal Icon" width="200">
  
  # Kotori Journal

  プロデューサーさん！毎日を私と一緒に記録しちゃいましょう！
</div>

## 概要

Kotori Journalは、ターミナルで動作するシンプルなジャーナルアプリケーションです。日々の出来事や考えを素早く記録し、AIアシスタント（Claude）による分析・要約・アドバイスを受けることができます。

### 主な特徴

- 🖊️ **シンプルな記録機能** - ターミナルから素早くエントリーを追加
- 📁 **カテゴリ管理** - エントリーを分類して整理
- 📅 **自動日報生成** - 翌日起動時に前日の記録をMarkdown形式で保存
- 🔍 **検索機能** - キーワードや日付でエントリーを検索
- 🤖 **AI統合** - Claude AIによる質問応答、要約、アドバイス機能
- 💾 **自動保存** - アプリが異常終了してもデータを保護

## インストール

```bash
# リポジトリをクローン
git clone https://github.com/your-username/kotori-journal.git
cd kotori-journal

# 依存関係をインストール
npm install

# ビルド
npm run build

# グローバルにインストール（オプション）
npm link
```

## 使い方

### 基本的な使い方

```bash
# 開発モードで起動
npm run dev

# または、グローバルインストール後
kotori
```

### キーボードショートカット

- **Enter**: エントリーを送信
- **Tab**: カテゴリを切り替え
- **Esc**: メニューを表示
- **/**: 検索モードに移行
- **Ctrl+D**: アプリを終了

### 基本操作

1. **エントリーの追加**
   ```
   朝の会議で新しいプロジェクトについて話し合った
   [Enter]
   ```

2. **カテゴリの切り替え**
   - Tabキーを押してカテゴリを循環
   - デフォルトカテゴリ: 仕事、プライベート、未分類

3. **検索**
   - `/` キーを押して検索モードへ
   - キーワードを入力して過去のエントリーを検索

4. **カテゴリ管理**
   - Escキーでメニューを開き「カテゴリ管理」を選択
   - 新しいカテゴリの追加や既存カテゴリの削除が可能

## Claude AI機能

### 設定

AI機能を使用するには、`ANTHROPIC_API_KEY` を設定してください。以下のいずれかの方法で設定できます：

#### 方法1: .envファイル（推奨）
```bash
# .envファイルを作成
cp .env.example .env

# .envファイルを編集してAPIキーを設定
ANTHROPIC_API_KEY=your-api-key-here
```

#### 方法2: 環境変数
```bash
export ANTHROPIC_API_KEY="your-api-key-here"
```

### AIトリガー

#### 1. 質問機能
入力に `？` や `?` を含めると質問モードになります：

```
？今日はどんな一日でしたか
？何かストレスはありましたか
今日の出来事について？
```

#### 2. 要約機能
以下のキーワードで要約を生成します：

```
要約して
まとめて
```

#### 3. アドバイス機能
以下のキーワードでアドバイスを取得します：

```
アドバイスして
助言をください
```

### 実際の使用例

1. 通常のジャーナルエントリーを追加：
   ```
   朝の会議で新しいプロジェクトの話をした
   ランチは同僚と美味しいラーメンを食べた
   夕方は資料作成で少し疲れた
   ```

2. AIに質問：
   ```
   ？今日はどうでしたか
   ```
   → AIが今日のエントリーを分析して回答

3. 要約を依頼：
   ```
   要約して
   ```
   → 今日のエントリーを簡潔にまとめた要約を生成

4. アドバイスを求める：
   ```
   アドバイスして
   ```
   → 今日の活動や気分に基づいてアドバイスを提供

### AI機能の注意事項

- AI機能は今日のエントリーのみを対象とします
- API keyが設定されていない場合、AI機能は利用できません
- AI応答は10秒後に自動的に画面から消えます
- 会話履歴は保存されません（日報のみ保存）

## データ保存

データは以下の構造でローカルに保存されます：

```
kotori-journal-data/
├── 2025/
│   ├── 01/
│   │   ├── 01.md    # 日報（Markdown形式）
│   │   ├── 02.md
│   │   └── ...
│   └── ...
├── categories.json   # カテゴリ設定
├── settings.json    # アプリ設定
└── .temp/          # 一時ファイル（自動保存用）
```

## 開発

### 必要な環境

- Node.js 18以上
- npm または yarn

### 開発コマンド

```bash
# 開発サーバーを起動
npm run dev

# テストを実行
npm test

# ビルド
npm run build

# 型チェック
npm run typecheck
```

### 技術スタック

- **TypeScript** - 型安全な開発
- **Ink** - React for CLIによるリッチなUI
- **Vitest** - 高速なテストランナー
- **Anthropic SDK** - Claude AI統合

## ライセンス

ISC

## 貢献

Issue や Pull Request は歓迎します。大きな変更を行う場合は、まず Issue を作成して変更内容について議論してください。